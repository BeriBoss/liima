<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">
<h:form id="tagForm">

    <a4j:outputPanel id="tagsPanel" ajaxRendered="true">
        <h:dataTable id="tagsTable" styleClass="well" var="propTag"
                     value="${editPropertyTagView.allPropertyTags}"
                     columnClasses=" ,last" rowClasses="odd-row,even-row">

            <f:facet name="caption">
                <nav class="width300px actionbar">
                    <ul>
                        <li><h:inputText id="newPropertyTagName" value="#{editPropertyTagView.propertyTagName}" rendered="#{editPropertyTagView.canManageGlobalTags}"/>
                            <a4j:commandLink styleClass="btn light"
                                             action="#{editPropertyTagView.addPropertyTag()}"
                                             render="tagsTable"
                                             rendered="#{editPropertyTagView.canManageGlobalTags}">
                                <i class="icon icon-add"></i>
                                <h:outputText value="Add"/>
                            </a4j:commandLink></li>
                    </ul>
                </nav>
                <h2>
                    <h:outputText value="Tags"/>
                </h2>
            </f:facet>

            <h:column>
                <f:facet name="header">
                    <h:panelGroup>
                        <h:outputText value="Name"/>
                        <br/>
                    </h:panelGroup>
                </f:facet>
                <h:outputText value="${propTag.name}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="Delete"/>
                </f:facet>
                <a4j:commandLink value="Delete"
                                 action="${editPropertyTagView.deletePropertyTag(propTag.id)}"
                                 render="tagsPanel"
                                 rendered="#{editPropertyTagView.canManageGlobalTags}">
                </a4j:commandLink>
            </h:column>

        </h:dataTable>
    </a4j:outputPanel>

</h:form>
</ui:composition>
