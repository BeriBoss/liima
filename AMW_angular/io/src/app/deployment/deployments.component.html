<div class="row page-header">
  <div class="col-md-4">
    <h1>{{appState.get('pageTitle')}}</h1>
  </div>
</div>

<div class="col-sm-10 main-full">
  <div class="panel panel-default">
    <div class="panel-heading clearfix">
      <h3 class="panel-title pull-left">Filter</h3>
    </div>

    <div class="panel-body">
      <span class="form-horizontal">

        <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade in" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><span [innerHTML]="successMessage"></span></div>
        <div *ngIf="errorMessage" class="alert alert-warning alert-dismissible fade in" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><span [innerHTML]="errorMessage"></span></div>

        <div class="form-group">
          <label for="selectFilterType" class="col-sm-3 control-label">Add Filter</label>
          <div class="col-sm-9">
            <select id="selectFilterType" class="form-control input-sm" [(ngModel)]="selectedFilterType" (change)="addFilter()">
              <option *ngFor="let filterType of filterTypes" [ngValue]="filterType">{{filterType.name}}</option>
            </select>
          </div>
        </div>

        <ng-container *ngIf="filters.length > 0">
          <div class="form-group" *ngFor="let filter of filters">
            <label class="col-sm-3 control-label"></label>
            <div class="col-sm-3">
              <input class="form-control" disabled type="text" value="{{filter.name}}">
            </div>
            <ng-container *ngIf="filter.type !== 'SpecialFilterType'">
              <div class="col-sm-1">
                <select id="selectFilterComp" class="form-control input-sm" [attr.disabled]="filter.compOptions.length == 1 ? '' : null" [(ngModel)]="filter.comp">
                  <option *ngFor="let compOption of filter.compOptions" [ngValue]="compOption.name">{{compOption.displayName}}</option>
                </select>
              </div>
              <ng-container *ngIf="filter.type != 'DateType'">
                <div class="col-sm-4" *ngIf="filter.type !== 'booleanType'">
                  <input class="form-control" list="filterOptionList" type="text" value="{{filter.val}}">
                  <datalist id="filterOptionList">
                    <option *ngFor="let filterValueOption of filterValueOptions[filter.name]">{{filterValueOption}}</option>
                  </datalist>
                </div>
                <div class="col-sm-4" *ngIf="filter.type === 'booleanType'">
                  <select class="form-control" list="filterOptionList" type="text" value="{{filter.val}}">
                    <option *ngFor="let filterValueOption of filterValueOptions[filter.name]">{{filterValueOption}}</option>
                  </select>
                </div>
              </ng-container>
              <div class="col-sm-4" *ngIf="filter.type === 'DateType'">
                <div class="input-group date datepicker">
                  <input type="text" class="form-control" #datePicker [ngModel]="filter.val"
                         (blur)="filter.val = datePicker.value">
                  <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                </div>
              </div>
            </ng-container>
            <div class="col-sm-1">
              <button type="button" class="btn btn-default" (click)="removeFilter(filter)">
                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
              </button>
            </div>
          </div>
        </ng-container>

      </span>
    </div>

  </div>
</div>
